import numpy as np
############
#world params
a=24
b=21
#######################
world=np.zeros((a,b))
world[:,0]=1
world[0,:]=1
world[:,b-1]=1
world[a-1,:]=1
####modified enc
'''
#horizontals:
world[1,4]=1
world[3:7,4]=1
world[8:15,4]=1
world[16:23,4]=1
world[1:4,7]=1
world[7:9,7]=1
world[10:17,7]=1
world[19:21,7]=1
world[22,7]=1
world[7:16,10]=1
world[1:4,11]=1
world[20:23,12]=1
world[7:10,13]=1
world[11:17,13]=1
world[1:4,16]=1
world[6:9,16]=1
world[10:12,16]=1
world[14:23,16]=1
#verticals
world[4,7:9]=1
world[4,10:12]=1
world[4,13:17]=1
world[5,1:4]=1
world[6,16:20]=1
world[7,7:13]=1
world[11,7:10]=1
world[12,1:4]=1
world[12,16:20]=1
world[16,9:13]=1
world[17,1]=1
world[17,3]=1
world[17,19]=1
world[17,17]=1
world[19,7:14]=1
world[19,15]=1
world[19:21,7]=0
world[22,7]=0
world[17,19]=0
world[17,17]=0
world[19,7:14]=0
world[19,15]=0
world[20:23,12]=0
world[14:23,16]=0
'''
##########################

#original environment 1
#horizontals:

world[1,4]=1
world[3:7,4]=1
world[8:15,4]=1
world[16:23,4]=1
world[1:4,7]=1
world[7:9,7]=1
world[10:17,7]=1
world[19:21,7]=1
world[22,7]=1
world[7:16,10]=1
world[1:4,11]=1
world[20:23,12]=1
world[7:10,13]=1
world[11:17,13]=1
world[1:4,16]=1
world[6:9,16]=1
world[10:12,16]=1
world[14:23,16]=1
#verticals
world[4,7:9]=1
world[4,10:12]=1
world[4,13:17]=1
world[5,1:4]=1
world[6,16:20]=1
world[7,7:13]=1
world[11,7:10]=1
world[12,1:4]=1
world[12,16:20]=1
world[16,9:13]=1
world[17,1]=1
world[17,3]=1
world[17,19]=1
world[17,17]=1
world[19,7:14]=1
world[19,15]=1
#########Environment 2 -right half free
'''
#original environment
#horizontals:
world[1,4]=1
world[3:7,4]=1
world[8:15,4]=1
world[16:23,4]=1
world[1:4,7]=1
world[7:9,7]=1
world[10:17,7]=1
world[19:21,7]=1
world[22,7]=1
world[7:16,10]=1
world[1:4,11]=1
world[20:23,12]=1
world[7:10,13]=1
world[11:17,13]=1
world[1:4,16]=1
world[6:9,16]=1
world[10:12,16]=1
world[14:23,16]=1
#verticals
world[4,7:9]=1
world[4,10:12]=1
world[4,13:17]=1
world[5,1:4]=1
world[6,16:20]=1
world[7,7:13]=1
world[11,7:10]=1
world[12,1:4]=1
world[12,16:20]=1
world[16,9:13]=1
world[17,1]=1
world[17,3]=1
world[17,19]=1
world[17,17]=1
world[19,7:14]=1
world[19,15]=1
world[19:21,7]=0
world[22,7]=0
world[17,19]=0
world[17,17]=0
world[19,7:14]=0
world[19,15]=0
world[20:23,12]=0
world[14:23,16]=0
'''
##########Environment 3-complex
'''
world[1,4]=1
world[3:7,4]=1
world[8:15,4]=1
world[16:23,4]=1
world[1:4,7]=1
world[7:9,7]=1
world[10:17,7]=1
world[19:21,7]=1
world[22,7]=1
world[7:16,10]=1
world[1:4,11]=1
world[20:23,12]=1
world[7:10,13]=1
world[11:17,13]=1
world[1:4,16]=1
world[6:9,16]=1
world[10:12,16]=1
world[14:23,16]=1
#verticals
world[4,7:9]=1
world[4,10:12]=1
world[4,13:17]=1
world[5,1:4]=1
world[6,16:20]=1
world[7,7:13]=1
world[11,7:10]=1
world[12,1:4]=1
world[12,16:20]=1
world[16,9:13]=1
world[17,1]=1
world[17,3]=1
world[17,19]=1
world[17,17]=1
world[19,7:14]=1
world[19,15]=1
world[18:19,9]=1
world[9,0:3]=1
world[20:24,2]=1
world[9,18:21]=1
world[14,5]=1
world[5,5]=1
world[7,14]=1
world[16,14]=1
world[13:16,12]=1
world[14,8]=1
world[20:24,18]=1
world[21:24,10]=1
world[14,19]=1
'''
#Environment 4-onlyisland
#horizontals:
'''
world[7:9,7]=1
world[10:17,7]=1
world[7:16,10]=1
world[7:10,13]=1
world[11:17,13]=1
#verticals
world[7,7:13]=1
world[11,7:10]=1
world[16,9:13]=1
'''

#Environment 5-noisland
#horizontals:
'''
world[1,4]=1
world[3:7,4]=1
world[8:15,4]=1
world[16:23,4]=1
world[1:4,7]=1
world[7:9,7]=1
world[10:17,7]=1
world[19:21,7]=1
world[22,7]=1
world[7:16,10]=1
world[1:4,11]=1
world[20:23,12]=1
world[7:10,13]=1
world[11:17,13]=1
world[1:4,16]=1
world[6:9,16]=1
world[10:12,16]=1
world[14:23,16]=1
#verticals
world[4,7:9]=1
world[4,10:12]=1
world[4,13:17]=1
world[5,1:4]=1
world[6,16:20]=1
world[7,7:13]=1
world[11,7:10]=1
world[12,1:4]=1
world[12,16:20]=1
world[16,9:13]=1
world[17,1]=1
world[17,3]=1
world[17,19]=1
world[17,17]=1
world[19,7:14]=1
world[19,15]=1

world[7:9,7]=0
world[10:17,7]=0
world[7:16,10]=0
world[7:10,13]=0
world[11:17,13]=0
#verticals
world[7,7:13]=0
world[11,7:10]=0
world[16,9:13]=0
'''
#Shifted environment
'''
world[3,6]=1
world[4:9,6]=1
world[10:17,6]=1
world[18:24,6]=1
world[3:6,9]=1
world[9:11,9]=1
world[12:19,9]=1
world[21:23,9]=1
world[23,9]=1
world[9:18,12]=1
world[3:6,13]=1
world[22:24,14]=1
world[9:12,15]=1
world[13:19,15]=1
world[3:6,18]=1
world[8:11,18]=1
world[12:14,18]=1
world[16:24,18]=1
#verticals
world[6,9:11]=1
world[6,12:14]=1
world[6,15:19]=1
world[7,3:6]=1
world[8,18:22]=1
world[9,9:15]=1
world[13,9:12]=1
world[14,3:6]=1
world[14,18:22]=1
world[18,11:15]=1
world[19,3]=1
world[19,5]=1
world[19,20]=1
world[19,19]=1
world[21,9:16]=1
world[21,17]=1
world[20,18]=0
world[22,9]=0
'''


############################
#task1: 3,3
#task2: 3,18
#task3: 20,18
#task4: 20,3
#task5: 10,2
#task6: 11,11
#task7: 20,14
#task8: 2,8
#task9: 15,2
#task10: 12,8
#test: 8,8

targ=np.array([12.,8.])
#targ=np.array([22.,14.])
targ_test=np.array([12.,8.])
common_state=np.array([8.,8.])
thresh=1.
################
#Q learning params
Qthresh=0.1
Nruns=2
alpha=0.05
gamma=0.95
lambd=0.9
epsilon=0.1
episodes=2000
A=4
highreward=1
commonreward=-0.1
penalty=-1
livingpenalty=-0.1
breakthresh=500
evalruns=10
evalsteps=100
##############
#prior specific parameters
Ns=10000
entropy_thresh=0.5#threshold t
Ntask=4
small=1e-10
########
epsilon_decay=0.0005
psi=1
nu=0.95
basetau=0
deltau=0.05
